<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Quotes | Advanced Quote Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        /* ============================================
   CSS RESET & BASE STYLES
   ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Color System - Dark Theme (Default) */
            --primary: #8a2be2;
            --primary-dark: #6a1cb0;
            --primary-light: #a855f7;
            --secondary: #00d4aa;
            --secondary-dark: #00b894;
            --accent: #ff6b9d;
            --accent-light: #ff8fab;
            --text: #ffffff;
            --text-light: #b0b0d0;
            --text-muted: #8888aa;
            --bg: #0f0f23;
            --bg-light: #1a1a2e;
            --bg-lighter: #252540;
            --card: #1a1a2e;
            --card-hover: #252540;
            --border: rgba(138, 43, 226, 0.2);
            --border-light: rgba(138, 43, 226, 0.1);
            --shadow: rgba(0, 0, 0, 0.3);
            --shadow-light: rgba(0, 0, 0, 0.1);
            --overlay: rgba(15, 15, 35, 0.85);

            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #8a2be2 0%, #4169e1 50%, #00d4aa 100%);
            --gradient-secondary: linear-gradient(135deg, #00d4aa 0%, #4169e1 50%, #8a2be2 100%);
            --gradient-accent: linear-gradient(135deg, #ff6b9d 0%, #ffa36c 100%);
            --gradient-card: linear-gradient(145deg, #1a1a2e, #252540);

            /* Effects */
            --glass-bg: rgba(26, 26, 46, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);

            /* Typography */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'SF Mono', Monaco, 'Cascadia Mono', monospace;

            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;

            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            --radius-full: 9999px;

            /* Transitions */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);

            /* Z-index layers */
            --z-particles: -1;
            --z-base: 1;
            --z-card: 10;
            --z-header: 50;
            --z-toast: 1000;
            --z-loading: 9999;
        }

        /* ============================================
   THEME VARIATIONS
   ============================================ */
        [data-theme="light"] {
            --text: #1a1a2e;
            --text-light: #4a4a6e;
            --text-muted: #666687;
            --bg: #f8fafc;
            --bg-light: #f1f5f9;
            --bg-lighter: #e2e8f0;
            --card: #ffffff;
            --card-hover: #f8fafc;
            --border: rgba(138, 43, 226, 0.15);
            --border-light: rgba(138, 43, 226, 0.08);
            --shadow: rgba(0, 0, 0, 0.08);
            --shadow-light: rgba(0, 0, 0, 0.03);
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(0, 0, 0, 0.05);
            --gradient-card: linear-gradient(145deg, #ffffff, #f8fafc);
        }

        [data-theme="sunrise"] {
            --primary: #ff6b6b;
            --primary-dark: #ff4757;
            --secondary: #4ecdc4;
            --secondary-dark: #00cec9;
            --accent: #ffa36c;
            --text: #5a3d2b;
            --text-light: #8b6d5e;
            --bg: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            --card: rgba(255, 255, 255, 0.95);
            --card-hover: rgba(255, 255, 255, 0.98);
            --gradient-primary: linear-gradient(135deg, #ff6b6b 0%, #ffa36c 100%);
            --gradient-secondary: linear-gradient(135deg, #4ecdc4 0%, #00cec9 100%);
        }

        [data-theme="midnight"] {
            --primary: #6c5ce7;
            --primary-dark: #5b4bc4;
            --secondary: #a29bfe;
            --secondary-dark: #8a7dfe;
            --accent: #fd79a8;
            --bg: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            --card: rgba(30, 30, 60, 0.95);
            --card-hover: rgba(40, 40, 70, 0.98);
            --gradient-primary: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            --gradient-secondary: linear-gradient(135deg, #00cec9 0%, #00b894 100%);
        }

        /* ============================================
   BASE STYLES
   ============================================ */
        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: background var(--transition-slow);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(138, 43, 226, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%);
            z-index: -2;
            pointer-events: none;
        }

        /* ============================================
   ANIMATED BACKGROUND
   ============================================ */
        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: var(--z-particles);
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: var(--secondary);
            opacity: 0;
            animation: particle-float 20s infinite linear;
        }

        .particle:nth-child(3n) {
            background: var(--primary);
            animation-duration: 25s;
        }

        .particle:nth-child(5n) {
            background: var(--accent);
            animation-duration: 30s;
            animation-delay: 5s;
        }

        @keyframes particle-float {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 0;
            }

            10% {
                opacity: 0.4;
            }

            90% {
                opacity: 0.4;
            }

            100% {
                transform: translate(calc(100vw * var(--dx, 0.5)), calc(-100vh * var(--dy, 1))) rotate(720deg) scale(0.5);
                opacity: 0;
            }
        }

        #geometricShapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: var(--z-particles);
            pointer-events: none;
        }

        .geometric-shape {
            position: absolute;
            border: 2px solid;
            border-color: var(--primary);
            opacity: 0.08;
            filter: blur(1px);
            animation: shape-morph 25s infinite ease-in-out;
        }

        .geometric-shape:nth-child(2n) {
            border-color: var(--secondary);
            animation-duration: 30s;
        }

        .geometric-shape:nth-child(3n) {
            border-color: var(--accent);
            animation-duration: 35s;
        }

        @keyframes shape-morph {

            0%,
            100% {
                border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
                transform: rotate(0deg) scale(1);
            }

            25% {
                border-radius: 58% 42% 75% 25% / 76% 46% 54% 24%;
                transform: rotate(90deg) scale(1.1);
            }

            50% {
                border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%;
                transform: rotate(180deg) scale(0.9);
            }

            75% {
                border-radius: 33% 67% 58% 42% / 63% 68% 32% 37%;
                transform: rotate(270deg) scale(1.05);
            }
        }

        /* ============================================
   LAYOUT & CONTAINERS
   ============================================ */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-xl);
            position: relative;
            z-index: var(--z-base);
        }

        @media (max-width: 768px) {
            .container {
                padding: var(--space-lg);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: var(--space-md);
            }
        }

        /* ============================================
   HEADER & NAVIGATION
   ============================================ */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3xl);
            flex-wrap: wrap;
            gap: var(--space-lg);
            position: relative;
            z-index: var(--z-header);
        }

        .logo {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
            line-height: 1;
            position: relative;
            padding: var(--space-sm) 0;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transform: scaleX(0.3);
            transition: transform var(--transition-base);
        }

        .logo:hover::after {
            transform: scaleX(1);
        }

        /* ============================================
   THEME SELECTOR
   ============================================ */
        .theme-selector {
            display: flex;
            gap: var(--space-sm);
            background: var(--glass-bg);
            padding: var(--space-sm);
            border-radius: var(--radius-full);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            position: relative;
            overflow: hidden;
        }

        .theme-selector::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transform: translateX(-100%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        .theme-btn {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            border: 2px solid transparent;
            background: var(--primary);
            color: white;
            cursor: pointer;
            transition: all var(--transition-bounce);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            position: relative;
            overflow: hidden;
        }

        .theme-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .theme-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .theme-btn:hover {
            transform: translateY(-3px) scale(1.05);
            border-color: var(--secondary);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.3);
        }

        .theme-btn.active {
            border-color: var(--secondary);
            box-shadow:
                0 0 0 3px rgba(0, 212, 170, 0.2),
                0 10px 25px rgba(138, 43, 226, 0.4);
            transform: scale(1.1);
        }

        .theme-btn:nth-child(1) {
            background: #8a2be2;
        }

        .theme-btn:nth-child(2) {
            background: #f0f2ff;
            color: #1a1a2e;
        }

        .theme-btn:nth-child(3) {
            background: linear-gradient(135deg, #ff6b6b, #ffa36c);
        }

        .theme-btn:nth-child(4) {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
        }

        .theme-btn:nth-child(5) {
            background: linear-gradient(135deg, #00d4aa, #4169e1);
        }

        /* ============================================
   CATEGORY FILTERS
   ============================================ */
        .category-filters {
            display: flex;
            gap: var(--space-sm);
            margin: var(--space-2xl) 0;
            flex-wrap: wrap;
            justify-content: center;
            position: relative;
        }

        .category-btn {
            padding: var(--space-sm) var(--space-xl);
            background: var(--glass-bg);
            border: 2px solid transparent;
            border-radius: var(--radius-full);
            color: var(--text);
            cursor: pointer;
            transition: all var(--transition-bounce);
            font-weight: 600;
            font-size: 0.95rem;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .category-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity var(--transition-base);
            z-index: -1;
        }

        .category-btn:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.2);
        }

        .category-btn:hover::before {
            opacity: 1;
        }

        .category-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
            box-shadow:
                0 8px 25px rgba(138, 43, 226, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .category-btn.active::before {
            opacity: 1;
        }

        /* ============================================
   MAIN CONTENT LAYOUT
   ============================================ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: var(--space-2xl);
            margin-top: var(--space-xl);
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: var(--space-xl);
            }
        }

        /* ============================================
   QUOTE SECTION
   ============================================ */
        .quote-section {
            background: var(--card);
            border-radius: var(--radius-xl);
            padding: var(--space-3xl);
            box-shadow:
                0 20px 60px var(--shadow),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-base);
        }

        .quote-section:hover {
            border-color: var(--primary);
            box-shadow:
                0 25px 80px rgba(138, 43, 226, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .quote-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(138, 43, 226, 0.1) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
        }

        .quote-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            z-index: 2;
        }

        /* ============================================
   QUOTE CONTENT
   ============================================ */
        .quote-content {
            position: relative;
            z-index: 1;
        }

        .quote-text {
            font-family: var(--font-heading);
            font-size: clamp(1.8rem, 4vw, 3rem);
            font-weight: 700;
            line-height: 1.4;
            color: var(--text);
            margin-bottom: var(--space-2xl);
            min-height: 200px;
            position: relative;
            text-align: center;
            padding: 0 var(--space-xl);
        }

        .quote-text::before,
        .quote-text::after {
            content: '"';
            font-family: var(--font-heading);
            font-size: 5rem;
            color: var(--primary);
            opacity: 0.15;
            position: absolute;
            line-height: 1;
            font-weight: 900;
        }

        .quote-text::before {
            top: -1.5rem;
            left: 0;
        }

        .quote-text::after {
            bottom: -2.5rem;
            right: 0;
        }

        .typing-cursor {
            display: inline-block;
            width: 3px;
            height: 1.2em;
            background: var(--secondary);
            margin-left: 2px;
            animation: cursor-blink 1s infinite;
            vertical-align: middle;
            border-radius: 1px;
        }

        @keyframes cursor-blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* ============================================
   QUOTE AUTHOR
   ============================================ */
        .quote-author {
            font-size: clamp(1.2rem, 2vw, 1.6rem);
            color: var(--primary);
            font-weight: 600;
            text-align: right;
            padding: var(--space-lg);
            background: rgba(138, 43, 226, 0.1);
            border-radius: var(--radius-lg);
            display: inline-block;
            align-self: flex-end;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(138, 43, 226, 0.2);
            backdrop-filter: blur(10px);
            transition: all var(--transition-base);
        }

        .quote-author:hover {
            background: rgba(138, 43, 226, 0.15);
            transform: translateX(-5px);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.2);
        }

        .quote-author::before {
            content: "â€” ";
        }

        .quote-author::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .quote-author:hover::after {
            left: 100%;
        }

        /* ============================================
   CONTROLS (BUTTONS)
   ============================================ */
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            margin-top: var(--space-3xl);
        }

        .btn {
            padding: var(--space-lg) var(--space-xl);
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            transition: all var(--transition-bounce);
            position: relative;
            overflow: hidden;
            font-family: var(--font-body);
            letter-spacing: 0.02em;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn i {
            font-size: 1.2rem;
            transition: transform var(--transition-base);
        }

        .btn:hover i {
            transform: scale(1.2);
        }

        /* Primary Button */
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow:
                0 10px 30px rgba(138, 43, 226, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow:
                0 15px 40px rgba(138, 43, 226, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Secondary Button */
        .btn-secondary {
            background: var(--glass-bg);
            color: var(--text);
            border: 2px solid var(--border-light);
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .btn-secondary:hover {
            background: rgba(138, 43, 226, 0.1);
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow:
                0 10px 25px rgba(138, 43, 226, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Success Button (Download) */
        .btn-success {
            background: var(--gradient-secondary);
            color: white;
            box-shadow:
                0 10px 30px rgba(0, 212, 170, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-success:hover {
            transform: translateY(-5px);
            box-shadow:
                0 15px 40px rgba(0, 212, 170, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* ============================================
   SIDEBAR
   ============================================ */
        .sidebar {
            background: var(--card);
            border-radius: var(--radius-xl);
            padding: var(--space-2xl);
            box-shadow:
                0 15px 40px var(--shadow),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-secondary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }

        /* ============================================
   STATS CARD
   ============================================ */
        .stats-card {
            background: rgba(138, 43, 226, 0.08);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
            border: 1px solid rgba(138, 43, 226, 0.15);
            backdrop-filter: blur(10px);
        }

        .stats-card h3 {
            font-size: 1.3rem;
            margin-bottom: var(--space-lg);
            color: var(--primary);
            font-weight: 700;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-item span:first-child {
            color: var(--text-light);
            font-weight: 500;
        }

        .stat-item span:last-child {
            color: var(--secondary);
            font-weight: 700;
            font-family: var(--font-mono);
            font-size: 1.1rem;
        }

        /* ============================================
   QUOTE HISTORY
   ============================================ */
        .quote-history {
            max-height: 400px;
            overflow-y: auto;
            padding-right: var(--space-sm);
        }

        .quote-history::-webkit-scrollbar {
            width: 6px;
        }

        .quote-history::-webkit-scrollbar-track {
            background: rgba(138, 43, 226, 0.05);
            border-radius: 3px;
        }

        .quote-history::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: all var(--transition-bounce);
            border-left: 4px solid transparent;
            border: 1px solid var(--border-light);
        }

        .history-item:hover {
            background: rgba(138, 43, 226, 0.15);
            border-left-color: var(--secondary);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.1);
        }

        .history-item:active {
            transform: translateX(2px);
        }

        /* ============================================
   LOADING ANIMATION
   ============================================ */
        .loading-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--card);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-xl);
            z-index: var(--z-loading);
            backdrop-filter: blur(10px);
        }

        .quantum-loader {
            width: 120px;
            height: 120px;
            position: relative;
            margin-bottom: var(--space-2xl);
        }

        .quantum-loader div {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-radius: 50%;
            animation: quantum-spin 2.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            box-shadow:
                inset 0 0 20px rgba(138, 43, 226, 0.2),
                0 0 30px rgba(138, 43, 226, 0.1);
        }

        .quantum-loader div:nth-child(1) {
            border-top-color: var(--primary);
            animation-delay: 0.1s;
        }

        .quantum-loader div:nth-child(2) {
            border-right-color: var(--secondary);
            animation-delay: 0.2s;
        }

        .quantum-loader div:nth-child(3) {
            border-bottom-color: var(--accent);
            animation-delay: 0.3s;
        }

        @keyframes quantum-spin {
            0% {
                transform: rotate(0deg) scale(1);
                opacity: 1;
            }

            50% {
                transform: rotate(180deg) scale(1.2);
                opacity: 0.8;
            }

            100% {
                transform: rotate(360deg) scale(1);
                opacity: 1;
            }
        }

        #loadingText {
            font-size: 1.2rem;
            color: var(--text-light);
            font-weight: 500;
            text-align: center;
            animation: text-pulse 2s ease-in-out infinite;
        }

        @keyframes text-pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        /* ============================================
   TOAST NOTIFICATION
   ============================================ */
        .toast {
            position: fixed;
            bottom: var(--space-2xl);
            right: var(--space-2xl);
            background: var(--card);
            color: var(--text);
            padding: var(--space-lg) var(--space-xl);
            border-radius: var(--radius-lg);
            box-shadow:
                0 20px 60px var(--shadow),
                0 8px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            transform: translateX(150%) translateY(20px);
            transition: transform var(--transition-bounce);
            z-index: var(--z-toast);
            border-left: 5px solid var(--secondary);
            max-width: 400px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
        }

        .toast.show {
            transform: translateX(0) translateY(0);
        }

        .toast i {
            color: var(--secondary);
            font-size: 1.4rem;
            flex-shrink: 0;
        }

        #toastMessage {
            font-weight: 500;
            line-height: 1.4;
        }

        /* ============================================
   MOBILE SWIPE INDICATOR
   ============================================ */
        .swipe-indicator {
            position: fixed;
            bottom: var(--space-xl);
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-sm) var(--space-xl);
            border-radius: var(--radius-full);
            display: none;
            align-items: center;
            gap: var(--space-sm);
            animation: swipe-indicator-pulse 3s ease-in-out infinite;
            z-index: var(--z-toast);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow:
                0 10px 30px rgba(138, 43, 226, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        @keyframes swipe-indicator-pulse {

            0%,
            100% {
                transform: translateX(-50%) translateY(100px);
                opacity: 0.9;
            }

            50% {
                transform: translateX(-50%) translateY(90px);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .swipe-indicator {
                display: flex;
                animation: swipe-indicator-pulse-mobile 3s ease-in-out infinite;
            }

            @keyframes swipe-indicator-pulse-mobile {

                0%,
                100% {
                    transform: translateX(-50%) translateY(0);
                    opacity: 0.9;
                }

                50% {
                    transform: translateX(-50%) translateY(-10px);
                    opacity: 1;
                }
            }
        }

        /* ============================================
   RESPONSIVE DESIGN
   ============================================ */
        @media (max-width: 1024px) {
            .header-bar {
                flex-direction: column;
                text-align: center;
                gap: var(--space-md);
            }

            .theme-selector {
                width: 100%;
                justify-content: center;
            }

            .quote-text {
                font-size: clamp(1.6rem, 3vw, 2.5rem);
                padding: 0 var(--space-md);
            }

            .controls {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: var(--space-lg);
            }

            .quote-section {
                padding: var(--space-2xl) var(--space-lg);
                min-height: 400px;
            }

            .quote-text::before,
            .quote-text::after {
                font-size: 3.5rem;
            }

            .quote-text::before {
                top: -1rem;
            }

            .quote-text::after {
                bottom: -2rem;
            }

            .category-filters {
                overflow-x: auto;
                padding-bottom: var(--space-sm);
                justify-content: flex-start;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .category-filters::-webkit-scrollbar {
                display: none;
            }

            .category-btn {
                white-space: nowrap;
                flex-shrink: 0;
            }

            .sidebar {
                margin-top: var(--space-xl);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: var(--space-md);
            }

            .quote-section {
                padding: var(--space-xl) var(--space-md);
            }

            .quote-text {
                font-size: 1.6rem;
                min-height: 150px;
            }

            .quote-author {
                font-size: 1.2rem;
                padding: var(--space-md);
            }

            .btn {
                padding: var(--space-md) var(--space-lg);
                font-size: 1rem;
            }

            .theme-btn {
                width: 42px;
                height: 42px;
            }

            .toast {
                left: var(--space-md);
                right: var(--space-md);
                bottom: var(--space-xl);
                max-width: none;
            }
        }

        /* ============================================
   UTILITY CLASSES
   ============================================ */
        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        .shadow-glow {
            box-shadow: 0 0 40px rgba(138, 43, 226, 0.3);
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================
   CUSTOM SCROLLBAR
   ============================================ */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(138, 43, 226, 0.05);
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: var(--radius-sm);
            border: 3px solid transparent;
            background-clip: padding-box;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* ============================================
   ACCESSIBILITY
   ============================================ */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ============================================
   FOCUS STATES
   ============================================ */
        button:focus-visible,
        .category-btn:focus-visible,
        .theme-btn:focus-visible {
            outline: 2px solid var(--secondary);
            outline-offset: 2px;
        }

        /* ============================================
   PRINT STYLES
   ============================================ */
        @media print {

            .header-bar,
            .theme-selector,
            .category-filters,
            .controls,
            .sidebar,
            .swipe-indicator,
            .toast {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
            }

            .container {
                max-width: 100%;
                padding: 0;
            }

            .quote-section {
                box-shadow: none;
                border: 1px solid #ddd;
                min-height: auto;
            }
        }
    </style>
</head>

<body>

    <!-- Particle Background -->
    <div id="particles"></div>

    <!-- Geometric Shapes -->
    <div id="geometricShapes"></div>

    <div class="container">
        <!-- Header -->
        <div class="header-bar">
            <div class="logo">Baiza Quotes</div>
            <div class="theme-selector">
                <button class="theme-btn active" data-theme="default"><i class="fas fa-moon"></i></button>
                <button class="theme-btn" data-theme="light"><i class="fas fa-sun"></i></button>
                <button class="theme-btn" data-theme="sunrise"><i class="fas fa-sunrise"></i></button>
                <button class="theme-btn" data-theme="midnight"><i class="fas fa-stars"></i></button>
                <button class="theme-btn" id="autoTheme"><i class="fas fa-robot"></i></button>
            </div>
        </div>

        <!-- Category Filters -->
        <div class="category-filters">
            <button class="category-btn active" data-category="all">All Categories</button>
            <button class="category-btn" data-category="motivation">Motivation</button>
            <button class="category-btn" data-category="wisdom">Wisdom</button>
            <button class="category-btn" data-category="life">Life</button>
            <button class="category-btn" data-category="love">Love</button>
            <button class="category-btn" data-category="success">Success</button>
            <button class="category-btn" data-category="inspiration">Inspiration</button>
            <button class="category-btn" data-category="funny">Funny</button>
        </div>

        <div class="main-content">
            <!-- Main Quote Section -->
            <div class="quote-section">
                <div class="loading-container" id="loadingContainer">
                    <div class="quantum-loader">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                    <div id="loadingText">Tuning into cosmic wisdom...</div>
                </div>

                <div class="quote-content">
                    <div class="quote-text" id="quoteText">
                        Wisdom begins in wonder. Click below to discover your first inspirational quote.
                    </div>
                    <div class="quote-author" id="quoteAuthor"></div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" id="generateBtn">
                        <i class="fas fa-bolt"></i>
                        New Quote
                    </button>
                    <button class="btn btn-secondary" id="copyBtn">
                        <i class="fas fa-copy"></i>
                        Copy Text
                    </button>
                    <button class="btn btn-secondary" id="shareBtn">
                        <i class="fas fa-share-alt"></i>
                        Share
                    </button>
                    <button class="btn btn-success" id="downloadBtn">
                        <i class="fas fa-download"></i>
                        Download Image
                    </button>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <div class="stats-card">
                    <h3>Your Stats</h3>
                    <div class="stat-item">
                        <span>Quotes Viewed</span>
                        <span id="viewedCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Categories</span>
                        <span id="categoriesCount">8</span>
                    </div>
                    <div class="stat-item">
                        <span>Session Time</span>
                        <span id="sessionTime">00:00</span>
                    </div>
                </div>

                <h3>Recent Quotes</h3>
                <div class="quote-history" id="quoteHistory">
                    <!-- History items will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden canvas for image download -->
    <div id="canvasContainer" style="position: absolute; left: -9999px; top: -9999px;">
        <canvas id="quoteCanvas" width="1200" height="630"></canvas>
    </div>

    <!-- Mobile Swipe Indicator -->
    <div class="swipe-indicator">
        <i class="fas fa-arrows-left-right"></i>
        Swipe left/right for new quotes
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Ready to generate quotes!</span>
    </div>

    <script>
        // ===============================
        // FIXED & WORKING API CONFIGURATION
        // ===============================
        const API_CONFIG = {
            // Primary APIs that are GUARANTEED to work
            workingAPIs: [
                {
                    name: 'Quotable.io',
                    url: 'https://api.quotable.io/random',
                    handler: async () => {
                        const response = await fetch('https://api.quotable.io/random');
                        const data = await response.json();
                        return {
                            text: data.content,
                            author: data.author,
                            category: data.tags && data.tags.length > 0 ? data.tags[0] : 'general'
                        };
                    }
                },
                {
                    name: 'DummyJSON',
                    url: 'https://dummyjson.com/quotes/random',
                    handler: async () => {
                        const response = await fetch('https://dummyjson.com/quotes/random');
                        const data = await response.json();
                        return {
                            text: data.quote,
                            author: data.author,
                            category: 'general'
                        };
                    }
                },
                {
                    name: 'TypeFit',
                    url: 'https://type.fit/api/quotes',
                    handler: async () => {
                        const response = await fetch('https://type.fit/api/quotes');
                        const data = await response.json();
                        const randomIndex = Math.floor(Math.random() * Math.min(50, data.length));
                        return {
                            text: data[randomIndex]?.text || "Be yourself; everyone else is already taken.",
                            author: data[randomIndex]?.author?.replace(', type.fit', '') || "Oscar Wilde",
                            category: 'inspiration'
                        };
                    }
                }
            ],

            // Category-specific API URLs
            categoryAPIs: {
                motivation: [
                    'https://api.quotable.io/random?tags=motivation',
                    'https://api.quotable.io/random?tags=inspirational'
                ],
                wisdom: [
                    'https://api.quotable.io/random?tags=wisdom',
                    'https://api.quotable.io/random?tags=philosophy'
                ],
                life: [
                    'https://api.quotable.io/random?tags=life',
                    'https://api.quotable.io/random?tags=experience'
                ],
                love: [
                    'https://api.quotable.io/random?tags=love',
                    'https://api.quotable.io/quotes?tags=love'
                ],
                success: [
                    'https://api.quotable.io/random?tags=success',
                    'https://api.quotable.io/quotes?tags=success'
                ],
                inspiration: [
                    'https://api.quotable.io/random?tags=inspirational',
                    'https://api.quotable.io/quotes?tags=inspirational'
                ],
                funny: [
                    'https://api.quotable.io/random?tags=humor',
                    'https://api.quotable.io/quotes?tags=humor'
                ]
            },

            // Backup quotes (in case all APIs fail)
            backupQuotes: [
                { text: "The only way to do great work is to love what you do.", author: "Steve Jobs", category: "motivation" },
                { text: "Life is what happens to you while you're busy making other plans.", author: "John Lennon", category: "life" },
                { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt", category: "inspiration" },
                { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle", category: "wisdom" },
                { text: "Whoever is happy will make others happy too.", author: "Anne Frank", category: "life" },
                { text: "You must be the change you wish to see in the world.", author: "Mahatma Gandhi", category: "wisdom" },
                { text: "Spread love everywhere you go. Let no one ever come to you without leaving happier.", author: "Mother Teresa", category: "love" },
                { text: "In three words I can sum up everything I've learned about life: it goes on.", author: "Robert Frost", category: "life" },
                { text: "Do not go where the path may lead, go instead where there is no path and leave a trail.", author: "Ralph Waldo Emerson", category: "inspiration" },
                { text: "Be yourself; everyone else is already taken.", author: "Oscar Wilde", category: "funny" },
                { text: "The only thing we have to fear is fear itself.", author: "Franklin D. Roosevelt", category: "success" },
                { text: "The journey of a thousand miles begins with one step.", author: "Lao Tzu", category: "wisdom" },
                { text: "Don't count the days, make the days count.", author: "Muhammad Ali", category: "motivation" },
                { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius", category: "motivation" },
                { text: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb", category: "wisdom" }
            ]
        };

        // ===============================
        // STATE MANAGEMENT
        // ===============================
        let state = {
            currentTheme: 'default',
            currentCategory: 'all',
            quotesViewed: 0,
            sessionStart: Date.now(),
            isTyping: false,
            currentQuote: null,
            quoteHistory: [],
            touchStartX: 0,
            autoThemeInterval: null,
            apiRetryCount: 0,
            usedQuotes: new Set() // Track used quotes to avoid repetition
        };

        // ===============================
        // DOM ELEMENTS
        // ===============================
        const elements = {
            quoteText: document.getElementById('quoteText'),
            quoteAuthor: document.getElementById('quoteAuthor'),
            generateBtn: document.getElementById('generateBtn'),
            copyBtn: document.getElementById('copyBtn'),
            shareBtn: document.getElementById('shareBtn'),
            downloadBtn: document.getElementById('downloadBtn'),
            loadingContainer: document.getElementById('loadingContainer'),
            loadingText: document.getElementById('loadingText'),
            toast: document.getElementById('toast'),
            toastMessage: document.getElementById('toastMessage'),
            viewedCount: document.getElementById('viewedCount'),
            categoriesCount: document.getElementById('categoriesCount'),
            sessionTime: document.getElementById('sessionTime'),
            quoteHistory: document.getElementById('quoteHistory'),
            particlesContainer: document.getElementById('particles'),
            shapesContainer: document.getElementById('geometricShapes'),
            quoteCanvas: document.getElementById('quoteCanvas')
        };

        // ===============================
        // INITIALIZATION
        // ===============================
        function init() {
            createParticles();
            createGeometricShapes();
            setupEventListeners();
            updateStats();

            // Load initial quote with immediate feedback
            setTimeout(() => {
                fetchRandomQuote();
            }, 500);

            startSessionTimer();
            setupAutoTheme();

            showToast('Quantum Quotes initialized!', 'success');
        }

        // ===============================
        // API FUNCTIONS (FIXED & WORKING)
        // ===============================

        // Main function to fetch random quote
        async function fetchRandomQuote() {
            if (state.isTyping) return;

            showLoading();
            state.isTyping = true;

            try {
                let quoteData = null;

                // If category is selected, try category-specific APIs first
                if (state.currentCategory !== 'all' && API_CONFIG.categoryAPIs[state.currentCategory]) {
                    quoteData = await tryCategorySpecificAPIs();
                }

                // If category-specific failed or no category selected, try working APIs
                if (!quoteData) {
                    quoteData = await tryWorkingAPIs();
                }

                // If all APIs failed, use backup quotes
                if (!quoteData) {
                    quoteData = getBackupQuote();
                }

                // Check if we've seen this quote recently
                const quoteKey = `${quoteData.text}-${quoteData.author}`;
                if (state.usedQuotes.has(quoteKey) && state.usedQuotes.size < API_CONFIG.backupQuotes.length) {
                    // Try to get a different quote
                    quoteData = getBackupQuote();
                }

                // Add to used quotes
                state.usedQuotes.add(`${quoteData.text}-${quoteData.author}`);

                // Add to history
                addToHistory(quoteData);

                // Display with typing animation
                await typeQuote(quoteData.text, quoteData.author);

                // Update stats
                state.quotesViewed++;
                updateStats();

                showToast('New quote loaded!', 'success');
                state.apiRetryCount = 0; // Reset retry count on success

            } catch (error) {
                console.error('Error fetching quote:', error);

                // Use backup quote as last resort
                const backupQuote = getBackupQuote();
                displayQuote(backupQuote.text, backupQuote.author, false);

                state.apiRetryCount++;
                if (state.apiRetryCount <= 3) {
                    showToast(`Trying again... (${state.apiRetryCount}/3)`, 'error');
                    setTimeout(fetchRandomQuote, 2000);
                } else {
                    showToast('Using backup quotes. Some APIs may be temporarily unavailable.', 'error');
                }
            } finally {
                hideLoading();
                state.isTyping = false;
            }
        }

        // Try category-specific APIs
        async function tryCategorySpecificAPIs() {
            const categoryUrls = API_CONFIG.categoryAPIs[state.currentCategory];
            if (!categoryUrls) return null;

            for (const url of categoryUrls) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) continue;

                    const data = await response.json();

                    // Handle different response formats
                    if (Array.isArray(data) && data.length > 0) {
                        // For array responses
                        const quote = data[Math.floor(Math.random() * data.length)];
                        return {
                            text: quote.content || quote.quote || quote.text,
                            author: quote.author || "Unknown",
                            category: state.currentCategory
                        };
                    } else if (data.content || data.quote) {
                        // For single quote responses
                        return {
                            text: data.content || data.quote,
                            author: data.author || "Unknown",
                            category: state.currentCategory
                        };
                    }
                } catch (error) {
                    console.log(`Category API failed: ${error.message}`);
                    continue;
                }
            }
            return null;
        }

        // Try working APIs
        async function tryWorkingAPIs() {
            for (const api of API_CONFIG.workingAPIs) {
                try {
                    console.log(`Trying API: ${api.name}`);
                    const quoteData = await api.handler();
                    if (quoteData && quoteData.text) {
                        return quoteData;
                    }
                } catch (error) {
                    console.log(`${api.name} failed: ${error.message}`);
                    continue;
                }
            }
            return null;
        }

        // Get backup quote
        function getBackupQuote() {
            let filteredQuotes = API_CONFIG.backupQuotes;

            // Filter by category if not "all"
            if (state.currentCategory !== 'all') {
                filteredQuotes = API_CONFIG.backupQuotes.filter(
                    quote => quote.category === state.currentCategory
                );
            }

            // If no quotes for category, use all quotes
            if (filteredQuotes.length === 0) {
                filteredQuotes = API_CONFIG.backupQuotes;
            }

            // Get random quote that hasn't been used recently
            let availableQuotes = filteredQuotes.filter(quote =>
                !state.usedQuotes.has(`${quote.text}-${quote.author}`)
            );

            // If all quotes have been used, reset used quotes for this category
            if (availableQuotes.length === 0) {
                state.usedQuotes.clear();
                availableQuotes = filteredQuotes;
            }

            const randomIndex = Math.floor(Math.random() * availableQuotes.length);
            return availableQuotes[randomIndex];
        }

        // ===============================
        // QUOTE DISPLAY FUNCTIONS
        // ===============================

        // Type quote with animation
        async function typeQuote(text, author) {
            // Clear previous content
            elements.quoteText.innerHTML = '';
            elements.quoteAuthor.textContent = '';

            // Type text character by character
            const typingSpeed = 10;
            const quoteText = `"${text}"`;

            for (let i = 0; i < quoteText.length; i++) {
                elements.quoteText.innerHTML = quoteText.substring(0, i + 1) + '<span class="typing-cursor"></span>';
                await new Promise(resolve => setTimeout(resolve, typingSpeed));
            }

            // Remove cursor
            elements.quoteText.innerHTML = quoteText;

            // Type author
            await new Promise(resolve => setTimeout(resolve, 300));

            const authorText = author;
            for (let i = 0; i < authorText.length; i++) {
                elements.quoteAuthor.textContent = authorText.substring(0, i + 1);
                await new Promise(resolve => setTimeout(resolve, typingSpeed / 2));
            }

            state.currentQuote = { text, author };
        }

        // Display quote without typing animation
        function displayQuote(text, author, showNotification = true) {
            elements.quoteText.innerHTML = `"${text}"`;
            elements.quoteAuthor.textContent = author;
            state.currentQuote = { text, author };

            if (showNotification) {
                showToast('Quote displayed', 'info');
            }
        }

        // ===============================
        // HISTORY FUNCTIONS
        // ===============================

        // Add quote to history
        function addToHistory(quoteData) {
            const historyItem = {
                text: quoteData.text,
                author: quoteData.author,
                timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
                category: state.currentCategory
            };

            state.quoteHistory.push(historyItem);

            // Keep only last 10 quotes
            if (state.quoteHistory.length > 10) {
                state.quoteHistory.shift();
            }

            updateHistoryDisplay();
        }

        // Update history display
        function updateHistoryDisplay() {
            elements.quoteHistory.innerHTML = '';

            // Show most recent first
            state.quoteHistory.slice().reverse().forEach((quote, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div style="font-size: 0.9rem; color: #b0b0d0; margin-bottom: 5px;">
                        ${quote.timestamp} â€¢ ${quote.category}
                    </div>
                    <div style="font-weight: 500; margin-bottom: 3px;">
                        "${quote.text.substring(0, 50)}${quote.text.length > 50 ? '...' : ''}"
                    </div>
                    <div style="color: #8a2be2; font-size: 0.9rem;">
                        â€” ${quote.author}
                    </div>
                `;

                historyItem.addEventListener('click', () => {
                    displayQuote(quote.text, quote.author, false);
                    showToast('Quote restored from history', 'info');
                });

                elements.quoteHistory.appendChild(historyItem);
            });
        }

        // ===============================
        // ACTION FUNCTIONS
        // ===============================

        // Copy quote to clipboard
        async function copyQuote() {
            if (!state.currentQuote) {
                showToast('Generate a quote first!', 'error');
                return;
            }

            const text = `"${state.currentQuote.text}" â€” ${state.currentQuote.author}`;

            try {
                await navigator.clipboard.writeText(text);
                showToast('Quote copied to clipboard!', 'success');
            } catch (err) {
                // Fallback method for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('Quote copied!', 'success');
            }
        }

        // Share quote
        async function shareQuote() {
            if (!state.currentQuote) {
                showToast('Generate a quote first!', 'error');
                return;
            }

            const shareData = {
                title: 'Quantum Quote',
                text: `"${state.currentQuote.text}" â€” ${state.currentQuote.author}`,
                url: window.location.href
            };

            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    // Fallback to Twitter
                    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}`;
                    window.open(twitterUrl, '_blank');
                    showToast('Opening Twitter to share...', 'info');
                }
            } catch (err) {
                if (err.name !== 'AbortError') {
                    showToast('Sharing failed', 'error');
                }
            }
        }

        // Download quote as image (FIXED FUNCTION)
        async function downloadQuoteAsImage() {
            if (!state.currentQuote) {
                showToast('Generate a quote first!', 'error');
                return;
            }

            try {
                // Show loading state on button
                const originalContent = elements.downloadBtn.innerHTML;
                elements.downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Image...';
                elements.downloadBtn.disabled = true;

                // Get canvas context
                const canvas = elements.quoteCanvas;
                const ctx = canvas.getContext('2d');

                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Create gradient background
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#8a2be2');
                gradient.addColorStop(0.5, '#4169e1');
                gradient.addColorStop(1, '#00d4aa');

                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Set text properties
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Draw quote text with wrapping
                const maxWidth = canvas.width - 200;
                const lineHeight = 70;
                const fontSize = 48;
                ctx.font = `bold ${fontSize}px 'Playfair Display', serif`;

                const words = state.currentQuote.text.split(' ');
                let lines = [];
                let currentLine = words[0];

                for (let i = 1; i < words.length; i++) {
                    const word = words[i];
                    const width = ctx.measureText(currentLine + " " + word).width;
                    if (width < maxWidth) {
                        currentLine += " " + word;
                    } else {
                        lines.push(currentLine);
                        currentLine = word;
                    }
                }
                lines.push(currentLine);

                // Draw lines
                const startY = canvas.height / 2 - (lines.length * lineHeight) / 2;
                lines.forEach((line, i) => {
                    ctx.fillText(`"${line}"`, canvas.width / 2, startY + i * lineHeight);
                });

                // Draw author
                ctx.font = `36px 'Inter', sans-serif`;
                ctx.fillText(`â€” ${state.currentQuote.author}`, canvas.width / 2, startY + lines.length * lineHeight + 50);

                // Draw watermark
                ctx.font = `24px 'Inter', sans-serif`;
                ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                ctx.fillText('thisizasif', canvas.width / 2, canvas.height - 60);

                // Create download link
                const link = document.createElement('a');
                link.download = `quote-${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();

                showToast('Quote image downloaded!', 'success');

            } catch (error) {
                console.error('Error generating image:', error);
                showToast('Failed to create image', 'error');
            } finally {
                // Restore button state
                elements.downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download Image';
                elements.downloadBtn.disabled = false;
            }
        }

        // ===============================
        // THEME FUNCTIONS
        // ===============================

        // Set theme
        function setTheme(theme) {
            state.currentTheme = theme;
            document.documentElement.setAttribute('data-theme', theme);

            // Update active theme button
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.theme === theme);
            });

            showToast(`Theme changed to ${theme}`, 'success');
        }

        // Toggle auto theme
        function toggleAutoTheme() {
            const autoBtn = document.getElementById('autoTheme');

            if (state.autoThemeInterval) {
                clearInterval(state.autoThemeInterval);
                state.autoThemeInterval = null;
                autoBtn.classList.remove('active');
                showToast('Auto theme disabled', 'info');
            } else {
                setupAutoTheme();
                autoBtn.classList.add('active');
                showToast('Auto theme enabled', 'success');
            }
        }

        // Setup auto theme based on time
        function setupAutoTheme() {
            const hour = new Date().getHours();
            let theme = 'default';

            if (hour >= 6 && hour < 12) theme = 'sunrise';
            else if (hour >= 12 && hour < 18) theme = 'light';
            else if (hour >= 18 && hour < 22) theme = 'default';
            else theme = 'midnight';

            setTheme(theme);

            // Update every hour
            state.autoThemeInterval = setInterval(() => {
                const hour = new Date().getHours();
                let newTheme = 'default';

                if (hour >= 6 && hour < 12) newTheme = 'sunrise';
                else if (hour >= 12 && hour < 18) newTheme = 'light';
                else if (hour >= 18 && hour < 22) newTheme = 'default';
                else newTheme = 'midnight';

                if (newTheme !== state.currentTheme) {
                    setTheme(newTheme);
                }
            }, 3600000);
        }

        // Set category
        function setCategory(category) {
            state.currentCategory = category;

            // Update active category button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === category);
            });

            // Clear used quotes for the new category
            state.usedQuotes.clear();

            // Fetch quote from selected category
            fetchRandomQuote();

            showToast(`Category: ${category}`, 'info');
        }

        // ===============================
        // UI HELPER FUNCTIONS
        // ===============================

        // Create animated particle background
        function createParticles() {
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const size = 2 + Math.random() * 6;
                const delay = Math.random() * 15;

                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.position = 'absolute';
                particle.style.background = '#00d4aa';
                particle.style.borderRadius = '50%';
                particle.style.opacity = '0.4';
                particle.style.animation = 'float 15s infinite linear';

                elements.particlesContainer.appendChild(particle);
            }
        }

        // Create geometric shapes
        function createGeometricShapes() {
            for (let i = 0; i < 6; i++) {
                const shape = document.createElement('div');
                shape.className = 'geometric-shape';

                const size = 40 + Math.random() * 120;
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const rotation = Math.random() * 360;
                const delay = Math.random() * 20;

                shape.style.width = `${size}px`;
                shape.style.height = `${size}px`;
                shape.style.left = `${x}%`;
                shape.style.top = `${y}%`;
                shape.style.transform = `rotate(${rotation}deg)`;
                shape.style.animationDelay = `${delay}s`;
                shape.style.position = 'absolute';
                shape.style.border = '2px solid rgba(138, 43, 226, 0.15)';
                shape.style.borderRadius = '30% 70% 70% 30% / 30% 30% 70% 70%';
                shape.style.opacity = '0.1';
                shape.style.animation = 'morph 20s infinite ease-in-out';

                elements.shapesContainer.appendChild(shape);
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Theme buttons
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const theme = e.target.closest('.theme-btn').dataset.theme;
                    if (theme === 'auto') {
                        toggleAutoTheme();
                    } else {
                        setTheme(theme);
                    }
                });
            });

            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.closest('.category-btn').dataset.category;
                    setCategory(category);
                });
            });

            // Control buttons
            elements.generateBtn.addEventListener('click', fetchRandomQuote);
            elements.copyBtn.addEventListener('click', copyQuote);
            elements.shareBtn.addEventListener('click', shareQuote);
            elements.downloadBtn.addEventListener('click', downloadQuoteAsImage);

            // Swipe gestures for mobile
            let touchStartX = 0;
            let touchEndX = 0;

            document.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });

            document.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe(touchStartX, touchEndX);
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', e => {
                if (e.code === 'Space') {
                    e.preventDefault();
                    fetchRandomQuote();
                } else if (e.code === 'ArrowRight') {
                    fetchRandomQuote();
                } else if (e.code === 'KeyC' && (e.ctrlKey || e.metaKey)) {
                    e.preventDefault();
                    copyQuote();
                } else if (e.code === 'KeyD' && (e.ctrlKey || e.metaKey)) {
                    e.preventDefault();
                    downloadQuoteAsImage();
                }
            });
        }

        // Handle swipe gestures
        function handleSwipe(startX, endX) {
            const diff = startX - endX;

            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    fetchRandomQuote();
                    showToast('Swiped left for new quote!', 'info');
                } else {
                    // Restore previous quote from history
                    if (state.quoteHistory.length > 1) {
                        const prevQuote = state.quoteHistory[state.quoteHistory.length - 2];
                        displayQuote(prevQuote.text, prevQuote.author, false);
                        showToast('Previous quote restored', 'info');
                    }
                }
            }
        }

        // Show loading state
        function showLoading() {
            elements.loadingContainer.style.display = 'flex';

            const messages = [
                'Tuning into cosmic wisdom...',
                'Consulting ancient philosophers...',
                'Brewing inspiration...',
                'Harvesting thoughts from great minds...',
                'Polishing the quote gem...',
                'Warping through quote dimensions...'
            ];

            elements.loadingText.textContent = messages[Math.floor(Math.random() * messages.length)];
        }

        // Hide loading state
        function hideLoading() {
            elements.loadingContainer.style.display = 'none';
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            elements.toastMessage.textContent = message;
            elements.toast.className = `toast ${type}`;
            elements.toast.classList.add('show');

            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        // Update statistics
        function updateStats() {
            elements.viewedCount.textContent = state.quotesViewed;
            elements.categoriesCount.textContent = 8;
        }

        // Start session timer
        function startSessionTimer() {
            setInterval(() => {
                const elapsed = Math.floor((Date.now() - state.sessionStart) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                elements.sessionTime.textContent =
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // ===============================
        // INITIALIZE APPLICATION
        // ===============================
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>